---
title: "Writing Functions, Conditionals, and Loops"
output: 
  html_document: 
    keep_md: yes
date: "2023-06-16"
description: "A tutorial on writing functions, conditionals, and loops using R for air quality data analysts."
---

## Overview
This tutorial provides an introduction to key programming concepts for air quality data analysts using R. It covers writing functions, using conditionals, and implementing loops in R. By the end of this tutorial, you should have a solid foundation in these concepts and be able to apply them to your air quality data analysis workflows.

# Writing Functions

In R, functions are a fundamental building block of code reuse and organization. They allow you to encapsulate a sequence of operations into a named entity that can be called repeatedly. In this section, we will learn how to write our own functions and use them to calculate the mean of a numeric vector.

To create a function in R, we use the `function()` keyword followed by parentheses `()`, which can contain any input arguments for the function. Inside the function body, defined by curly braces `{}`, you specify the operations that the function should perform. Here's the basic structure of a function:

```{r}
function_name <- function(arg1, arg2, ...) {
  # operations
  return(result)
}
```

Let's create our own version of a function that calculates the mean of a numeric vector. We'll call it `myMean()` to avoid conflicting with the built-in `mean()` function.

```{r}
myMean <- function(x) {
  n <- length(x)
  sum <- sum(x)
  mean <- sum / n
  return(mean)
}
```

In this function, we calculate the length of the vector `x`, compute the sum of its elements, and divide the sum by the length to get the mean. Finally, we return the mean as the result of the function.

Now, let's test our `myMean()` function with a sample vector `my_vector`.

```{r}
my_vector <- c(1, 3, 5, 2, 6, 9, 0)
vector_mean <- myMean(my_vector)
vector_mean
```

The output should be `4`, which is the mean of the elements in `my_vector`.

Let's compare our result with the built-in `mean()` function.

```{r}
mean(my_vector)
```

Both `myMean()` and `mean()` should return the same result, indicating that our custom function is working correctly.

# Conditionals

Conditionals allow us to control the flow of our program based on certain conditions. In R, we can use the `if()` and `ifelse()` functions to implement conditional statements.

The `if()` function executes a block of code only if a specified condition is true. Here's the basic structure of an `if()` statement:

```{r}
if (condition) {
  # code to be executed if the condition is true
} else {
  # code to be executed if the condition is false
}
```

For example, let's print a message based on the value of an `ozone_value` variable.

```{r}
ozone_value <- 0.075

if (ozone_value > 0.065) {
  print("Potential Health Effects")
} else {
  print("All Good")
}
```

The output will be "Potential Health Effects" since `ozone_value` is greater than `0.065`.

The `ifelse()` function is a more concise way of performing conditional operations. It returns a value based on a logical test. Here's the structure of an `ifelse()` function:

```{r}
ifelse(test, yes, no)
```

The `test` argument is the logical expression to evaluate, `yes` is the value to return if the test is true, and `no` is the value to return if the test is false.

For example, let's assign a message to the `message` variable based on the `ozone_value` logical test.

```{r}
ozone_value <- 0.060

message <- ifelse(ozone_value > 0.065, "Potential Health Effects", "All Good")
message
```

The `message` variable will contain the value "All Good" since `ozone_value` is less than `0.065`.

# Loops

Loops are used to repeatedly execute a block of code. In R, we have the `for` loop and the `apply()` functions.

The `for` loop allows you to iterate over a sequence and perform a set of operations for each element of that sequence. Here's the basic structure of a `for` loop:

```{r}
for (element in sequence) {
  # code to be executed for each element
}
```

For example, let's print the values of a vector using a `for` loop.

```{r}
ints <- c(1, 2, 3)

for (i in ints) {
  print(i)
}
```

The output will be:

```
1
2
3
```

We also have the option to apply a function to each element of a list using the `lapply()` and `sapply()` functions.

The `lapply()` function applies a function to each element of a list and returns a list of the results.

```{r}
my_list <- list(c(1, 5, 9, 3), 1:10, c(23, 42))
my_averages <- lapply(my_list, myMean)
my_averages
```

The output will be a list containing the means of each vector in `my_list`.

The `sapply()` function does the same as `lapply()`, but simplifies the output as much as possible.

```{r}
my_list <- list(c(1, 5, 9, 3), 1:10, c(23, 42))
my_averages <- sapply(my_list, myMean)
my_averages
```

The output will be a vector containing the means of each vector in `my_list`.

# Exercises
1. Write a function called `calculate_sd()` that calculates the standard deviation of a numeric vector.

2. Use the `ifelse()` function to create a vector called `season` that categorizes temperatures as "Summer" if they are above 25Â°C and "Winter" otherwise.

# Multiple Choice Questions
1. When writing a function in R, what is the purpose of the `return()` statement?
a) To specify the arguments of the function
b) To define the function name
c) To indicate the output of the function
d) To loop over a sequence of values

2. Which function is used in R to implement conditional statements?
a) `ifelse()`
b) `for()`
c) `apply()`
d) `mean()`

3. What is the output of the following code?

```{r}
x <- c(1, 2, 3)
for (i in x) {
  print(i^2)
}
```
a) 1 2 3
b) 1 4 9
c) 2 4 6
d) 1 2 4 9

4. The `lapply()` function in R returns a:
a) Vector
b) List
c) Data frame
d) Numeric scalar

5. Which of the following functions calculates the mean of a numeric vector in R?
a) `sum()`
b) `length()`
c) `mean()`
d) `sd()`

**Click the "Submit" button to check your answers.**

# Revisions
1. Updated the overall tone and style to be more concise and accessible.
2. Added a more detailed explanation of writing functions in R.
3. Provided examples and explanations for conditional statements and loops.
4. Introduced exercises and multiple choice questions to test understanding.
5. Made general formatting and wording improvements for clarity and readability.