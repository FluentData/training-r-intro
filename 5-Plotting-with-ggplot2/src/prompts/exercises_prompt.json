[
  {
    "role": "system",
    "content": "You are an expert R programmer and instructor. You are helping the user write course materials for a course on R programming."
  },
  {
    "role": "user",
    "content": "Please create a set of exercises for the following lesson. Include 1 exercise for each section of the lesson and 3-5 exercises the cover material from multiple sections of the lesson. This last set of exercises should reinforce what was learned in multiple sections of this lesson. The content of course is:\n\n# Plotting with ggplot2\n\nIn our [last lesson](../4-Writing-Functions-Conditionals-and-Loops), we finished automating our data processing tasks using functions, conditionals, and loops. Now we are ready to explore and understand our data better with visualizations. \n\n## Introduction to ggplot()\n\n`ggplot2` is a powerful and flexible data visualization package in R. It uses a layered approach to plot building, which allows you to add, remove or change components in a straightforward, transparent manner. \n\nTo use `ggplot2`, we typically follow a sequence of steps:\n\n1. Start with the `ggplot()` function where we specify the dataset and map variables to aesthetics (visual properties of objects in the plot like shapes or colors).\n2. Add `geoms` – geometric objects like points (`geom_point` for scatter plots), bars (`geom_bar` for bar plots), or lines (`geom_line` for line plots) that determine the type of the plot.\n3. Finally, customize and refine the plot with additional layers like labels, themes, facets etc.\n\nLet's begin by installing and loading the `ggplot2` package. If you haven't installed it before, uncomment and run the first line.\n\n```r\n# install.packages('ggplot2')\nlibrary(ggplot2)\n```\n\nNow we are ready to use `ggplot2` to make some plots!\n\n## Scatter Plot\n\nFor our first plot, let's create a scatter plot of ozone concentration (`ozone`) against temperature (`temp`) using the `chicago_air.csv` dataset. \n\n```r\n# Load the dataset\nair_quality <- read.csv('../data/chicago_air.csv')\n\n# Create a scatter plot\nggplot(air_quality, aes(x=temp, y=ozone)) +\n  geom_point()\n```\n\nIn this example, we have used `geom_point()` to create a scatter plot. The first argument to `ggplot()` function is the dataset `air_quality`. The `aes()` function is used to map the `temp` to x-axis and `ozone` to y-axis.\n\n## Customizing the Scatter Plot\n\nThe plot above is pretty basic. Let's customize it by adding color, title and labels.\n\n```r\n# Customized scatter plot\nggplot(air_quality, aes(x=temp, y=ozone)) +\n  geom_point(colour='#3366FF') +\n  ggtitle('Relationship between Ozone and Temperature') +\n  xlab('Temperature (°F)') +\n  ylab('Ozone (ppm)')\n```\n\nHere we used `geom_point(colour='#3366FF')` to change the point color, `ggtitle()` to add a title to the plot and `xlab()` & `ylab()` to label the x and y axes respectively.\n\n## Histogram\n\nNext, let's create a histogram of `ozone` concentrations.\n\n```r\n# Histogram\nggplot(air_quality, aes(x=ozone)) +\n  geom_histogram(binwidth=0.005, fill='#FF6633', color='black')\n```\n\nHistogram divides the continuous variable into bins (intervals) and count the number of observations in each bin. So unlike scatter plot, histogram only needs one variable (`ozone` in this case) which is passed to x. The `binwidth` argument controls the width of the bins and `fill` changes the color of the bars.\n\n## Faceted Bar Plot\n\nLastly, let's create a bar plot showing the average `ozone` concentration for each `month`, and facet it by `weekday`.\n\nFirst, we need to calculate the average `ozone` concentration per `month` and `weekday`. We will use `aggregate()` function from base R for this purpose.\n\n```r\n# Calculate mean ozone concentration per month and weekday\navg_ozone <- aggregate(ozone ~ month + weekday, data = air_quality, FUN = mean, na.rm = TRUE)\n\n# Create faceted bar plot\nggplot(avg_ozone, aes(x=month, y=ozone, fill=weekday)) +\n  geom_bar(stat='identity') +\n  theme_minimal() +\n  facet_wrap(~weekday) +\n  labs(title='Average Ozone Concentration per Month, Faceted by Weekday',\n       x='Month',\n       y='Average Ozone Concentration (ppm)')\n```\n\nHere we are using `geom_bar(stat='identity')` to create a bar plot. The `facet_wrap()` function creates a series of plots for each level of `weekday` factor. The `theme_minimal()` gives a clean white background.\n\n## Up Next\n\nIn this lesson, we used `ggplot2` to create and customize a variety of graphics. We covered the basics of the `ggplot()` function structure, and we practiced creating scatter plots, histograms, and bar plots, and learned how to facet our plots.\n\nIn our [next lesson](../6-Basic-Statistics-in-R), we will move into calculating common descriptive and inferential statistics such as mean, median, correlation, confidence intervals, t-tests, ANOVA, and linear models. We will use these statistical tools to continue exploring and gaining insights from our air quality datasets!"
  }
]